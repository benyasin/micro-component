"use strict";const a=process.client,h=a&&!!(localStorage!=null&&localStorage.getItem("MICRO_COMPONENT:DEBUG")),s="Footer";let i="";const m={inheritAttrs:!1,data(){return{component:null,microId:this.$attrs.microId||Math.floor(Date.now()*Math.random()).toString().substr(4)}},methods:{log(e,...t){(this.$attrs.logger||h)&&console.log(`[MicroComponent] ${s}: ${e}`,t.map(o=>typeof o=="object"?JSON.stringify(o,null,2):o))},async createComponent(){var o,n;this.log("create component");const e=await async function(){return window.MicroRuntime?window.MicroRuntime:new Promise(r=>{window.addEventListener("MicroRuntime:ready",()=>{r(window.MicroRuntime)})})}(),t=await e.createComponent({microId:this.microId,type:s,props:this.$attrs,el:this.$el});t&&((o=t.event)==null||o.clearEvents(),(n=t.event)==null||n.on("event",(r,...c)=>{this.log("event emit",r,...c),this.$listeners[r]&&this.$listeners[r](...c)}),t==null||t.updateProps(this.$attrs)),this.component=t,this.log("create component complete")}},created(){var e;this.serverHTML="",this.$attrs.serverLocale?this.serverHTML=i=this.$attrs.serverLocale:i?this.serverHTML=i:a&&(this.serverHTML=i=(e=document.querySelector(`[data-micro-type="${s}"]`))==null?void 0:e.innerHTML),this.serverHTML||(this.serverHTML="<div></div>")},mounted(){this.$nextTick(()=>{this.createComponent()})},beforeDestroy(){var e,t;this.log("beforeDestroy"),(t=(e=this.component)==null?void 0:e.event)==null||t.clearEvents(),this.component=null},render:function(e){var o;this.log("render"),this.component&&(this.log("update props",this.$attrs),(o=this.component)==null||o.updateProps(this.$attrs));const t=this.$attrs.theme?`micro-${this.$attrs.theme}`:"";return e("div",{key:this.microId,class:{micro:!0,[t]:!0},attrs:{"data-micro-type":s},domProps:{innerHTML:this.serverHTML}})}};module.exports=m;
